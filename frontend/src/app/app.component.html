<div class="container">
  <h1>Add Author</h1>

  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>
  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
  </div>

  <form (ngSubmit)="onAddAuthor()" #authorForm="ngForm" novalidate>
    <div class="form-group">
      <label>Name:</label>
      <input type="text" class="form-control" [(ngModel)]="newAuthor.name" name="name" required />
    </div>

    <div class="form-group">
      <label>Birth Date:</label>
      <input type="date" class="form-control" [(ngModel)]="newAuthor.birthDate" name="birthDate" required />
    </div>

    <div class="form-group">
      <label>Nationality:</label>
      <input type="text" class="form-control" [(ngModel)]="newAuthor.nationality" name="nationality" required />
    </div>

    <h3>Books</h3>
    <div class="form-inline">
      <input type="text" placeholder="Title" [(ngModel)]="newBook.title" name="bookTitle" class="form-control" required />
      <input type="text" placeholder="ISBN" [(ngModel)]="newBook.isbn" name="bookIsbn" class="form-control" required />
      <input type="date" placeholder="Publication Date" [(ngModel)]="newBook.publicationDate" name="bookDate" class="form-control" required />
      <button type="button" class="btn btn-secondary" (click)="addBookToAuthor()">Add Book</button>
    </div>

    <ul class="list-group mt-2" *ngIf="newAuthor.books?.length">
      <li class="list-group-item" *ngFor="let book of newAuthor.books; let i = index">
        {{ book.title }} - {{ book.isbn }} - {{ book.publicationDate }}
        <button class="btn btn-danger btn-sm float-end" (click)="removeBook(i)">Remove</button>
      </li>
    </ul>

    <button type="submit" class="btn btn-primary mt-3">Add Author</button>
  </form>

  <hr />

  <h2>All Authors</h2>
  <div *ngFor="let author of authors" class="card my-3">
    <div class="card-body">
      <h5 class="card-title">{{ author.name }}</h5>
      <p><strong>Born:</strong> {{ author.birthDate }}</p>
      <p><strong>Nationality:</strong> {{ author.nationality }}</p>

      <div *ngIf="author.books?.length">
        <h6>Books:</h6>
        <ul>
          <li *ngFor="let book of author.books">
            {{ book.title }} - {{ book.isbn }} - {{ book.publicationDate }}
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<ng-template #loading>
  <p>Loading authors...</p>
</ng-template>


<style>
  .container {
    max-width: 600px;
    margin: 2rem auto;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f9f9f9;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgb(0 0 0 / 0.1);
  }

  h2 {
    color: #333;
    margin-bottom: 1rem;
  }

  form label {
    display: block;
    margin: 0.5rem 0 0.2rem 0;
    font-weight: 600;
  }

  form input {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  form input:focus {
    border-color: #007bff;
    outline: none;
  }

  .error {
    color: red;
    font-size: 0.8rem;
    margin-top: 0.2rem;
  }

  button {
    margin-top: 1rem;
    padding: 0.6rem 1.2rem;
    background-color: #007bff;
    border: none;
    border-radius: 4px;
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  button:disabled {
    background-color: #a5c8ff;
    cursor: not-allowed;
  }

  button:not(:disabled):hover {
    background-color: #0056b3;
  }

  .author-list {
    list-style: none;
    padding-left: 0;
  }

  .author-list li {
    background-color: #fff;
    margin-bottom: 1rem;
    padding: 1rem;
    border-radius: 6px;
    box-shadow: 0 1px 3px rgb(0 0 0 / 0.1);
  }
</style>

